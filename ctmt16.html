<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ê´€ì¥ë‹˜ì˜ ë¹„ë°€ì—…ë¬´</title>
<style>
  body{
    background-image:url("ctmt16.jpg");
    background-size:cover;background-position:center;background-attachment:fixed;
    font-family:Arial,sans-serif;margin:0;
  }

  /* ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” */
  .slider-container{display:flex;align-items:center;justify-content:center;margin-top:50px;}
  .arrow-button{
    background:#00A6ED;width:35px;height:35px;font-size:35px;cursor:pointer;
    position:fixed;bottom:200px;left:15%;
    border-radius:5px;box-shadow:3px 3px 5px rgba(0,0,0,.4);
    transition:all .3s ease-in-out;display:flex;align-items:center;justify-content:center;
    line-height:1;text-align:center;border:none;color:#fff;
  }
  .arrow-button:active{transform:scale(0.98);}
  .image-container img{
    width:130px;height:auto;border-radius:22px;transition:opacity .3s ease-in-out;
    position:fixed;bottom:150px;left:50%;transform:translateX(-50%);
    user-select:none;pointer-events:none;
  }

  /* ì…ë ¥ì°½ ë°•ìŠ¤ */
  .container{
    background:rgba(0,0,0,.4);padding:10px;border-radius:10px;text-align:center;
    position:fixed;bottom:50px;left:50%;transform:translateX(-50%);
    width:60%;max-width:375px;display:flex;flex-direction:column;align-items:center;
  }
  .input-container{display:flex;align-items:center;width:100%;justify-content:center;}
  input{
    padding:8px;font-size:14px;width:60%;border:none;border-radius:5px;margin-right:10px;
    caret-color:orange;
  }
  .primary-btn{
    padding:4px 6px;font-size:12px;font-weight:bold;width:65px;cursor:pointer;
    color:#fff;background:orange;border:none;border-radius:5px;box-shadow:0 4px 6px rgba(0,0,0,.466);
  }
  .primary-btn:disabled{background:rgb(109,93,93)!important;cursor:not-allowed;opacity:.8}

  /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
  .button-container{
    position:fixed;bottom:15px;left:50%;transform:translateX(-50%);
    display:flex;gap:10px;
  }
  .button-container button{ composes: primary-btn; } /* (ì„¤ëª…ìš©) */

  /* ëª¨ë‹¬ */
  .modal{
    display:none;position:fixed;z-index:1000;left:50%;top:50%;transform:translate(-50%,-50%);
    width:300px;padding:15px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,.2);
  }
  .modal-content{text-align:center;}
  .close{float:right;cursor:pointer;font-size:20px;font-weight:bold;}

  /* ì •ë‹µ ë³´ìƒ ì˜ìƒ ì˜¤ë²„ë ˆì´ */
  .video-overlay{
    display:none; /* ì´ˆê¸°ì—” ë°˜ë“œì‹œ none */
    position:fixed;inset:0;background:rgba(0,0,0,.6);
    z-index:2000;align-items:center;justify-content:center;
  }
  .video-box{
    width:min(70vw,420px);background:#000;border-radius:12px;overflow:hidden;
    box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  video{width:100%;height:auto;display:block}
  /* === [ì¶”ê°€] ë¯¸ì…˜ ì˜¤ë²„ë ˆì´: ë°°ê²½ íˆ¬ëª…, ì´ˆê¸° ì™„ì „ ìˆ¨ê¹€ === */
#missionOverlay{
  display:none;               /* ì´ˆê¸°ì—” ì™„ì „ ìˆ¨ê¹€ â†’ ê¹Œë§Œ ë°•ìŠ¤ ë°©ì§€ */
  position:fixed;
  inset:0;
  z-index:1500;
  background:transparent;     /* ë°°ê²½ ì–´ë‘ì›Œì§€ì§€ ì•Šê²Œ */
  align-items:center;
  justify-content:center;
}

/* ì˜ìƒ ì»¨í…Œì´ë„ˆ(ì„ íƒ): ì˜ìƒë§Œ ì‚´ì§ ê°•ì¡°í•˜ê³  ì‹¶ì„ ë•Œ */
#missionOverlay .video-box{
  width:min(70vw,420px);
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,.35);
}

/* === [ì¤‘ìš” ì¶”ê°€] video ì´ˆê¸° ìˆ¨ê¹€ â†’ ê¸°ë³¸ ê²€ì€ ë°°ê²½ ë…¸ì¶œ ë°©ì§€ === */
#missionVideo{
  display:none;               /* 1ì´ˆ ëŒ€ê¸° ì¤‘ì—” ë¹„ë””ì˜¤ ìì²´ë¥¼ ìˆ¨ê¹€ */
}

  @media (max-width:768px){
    .container{width:80%;padding:10px;}
    input{font-size:12px;width:60%;}
    .primary-btn{font-size:12px;padding:4px 6px;}
  }
</style>
</head>
<body>
  <!-- ìŠ¬ë¼ì´ë” -->
  <div class="slider-container">
    <div class="image-container">
      <img id="slider-image" src="blackcat11.png" alt="ìŠ¬ë¼ì´ë“œ ì´ë¯¸ì§€">
    </div>
    <button class="arrow-button" onclick="nextImage()">â–¶ï¸</button>
  </div>

  <!-- ì…ë ¥ì°½ -->
  <div class="container">
    <div class="input-container">
      <input type="text" id="answer" autocomplete="off" />
      <button id="submitBtn" class="primary-btn">ì…ë ¥</button>
    </div>
  </div>

  <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ -->
  <div class="button-container">
    <button id="hint1"    class="primary-btn">íŒíŠ¸ 1</button>
    <button id="hint2"    class="primary-btn" disabled>íŒíŠ¸ 2</button>
    <button id="answerBtn"class="primary-btn" disabled>ì •ë‹µ ë³´ê¸°</button>
    <button id="totalBtn" class="primary-btn">ì¸„ë¥´ í•©ê³„</button>
  </div>

  <!-- ì•ˆë‚´ ëª¨ë‹¬ -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <p id="modalText"></p>
    </div>
  </div>
  <!-- === [ì¶”ê°€] ë¯¸ì…˜(ì¸íŠ¸ë¡œ) ì˜ìƒ ì˜¤ë²„ë ˆì´ === -->
<div id="missionOverlay" aria-hidden="true">
  <div class="video-box">
    <video id="missionVideo" playsinline muted></video>
  </div>
</div>

  <!-- ë³´ìƒ ì˜ìƒ -->
  <div id="videoOverlay" class="video-overlay" aria-hidden="true">
    <div class="video-box">
      <!-- ìŒì†Œê±° + ì¸ë¼ì¸ ì¬ìƒ -->
      <video id="rewardVideo" playsinline muted></video>
    </div>
  </div>

<script>
/* ===== í˜ì´ì§€ë³„ ì„¤ì • ===== */
const correctAnswer = "3258";
const nextUrl = "https://baekko.github.io/baekkohouse/ctm17.html";

/* ===== ìŠ¬ë¼ì´ë” ===== */
const images = ["blackcat11.png","blackcat22.png","blackcat33.png","blackcat44.png"];
let currentIndex = 0;
function nextImage(){
  currentIndex = (currentIndex + 1) % images.length;
  document.getElementById("slider-image").src = images[currentIndex];
}

/* ===== ìƒíƒœ ===== */
// íŒíŠ¸ ë‹¨ê³„: 0(ì—†ìŒ) â†’ 1(íŒíŠ¸1) â†’ 2(íŒíŠ¸2) â†’ 3(ì •ë‹µë³´ê¸°)
let hintLevel = 0;

/* ===== ìŠ¤í† ë¦¬ì§€ í‚¤ ===== */
const CHURU_KEY = "churuTotal";
const PAGE_KEY  = "settled:" + location.pathname; // ì´ ê²½ë¡œ ë¬¸ì œëŠ” í•œ ë²ˆë§Œ ê°€ì‚°
if (localStorage.getItem(CHURU_KEY) === null) localStorage.setItem(CHURU_KEY,"0");

/* ===== ìš”ì†Œ ===== */
const $answer   = document.getElementById('answer');
const $submit   = document.getElementById('submitBtn');
const $hint1    = document.getElementById('hint1');
const $hint2    = document.getElementById('hint2');
const $ansBtn   = document.getElementById('answerBtn');
const $totalBtn = document.getElementById('totalBtn');

const $modal     = document.getElementById('modal');
const $modalText = document.getElementById('modalText');
const $close     = document.getElementById('closeModal');

const $overlay = document.getElementById('videoOverlay');
const $video   = document.getElementById('rewardVideo');

/* ===== ëª¨ë‹¬ ===== */
function openModal(msg){ $modalText.innerText = msg; $modal.style.display = "block"; }
function closeModal(){ $modal.style.display = "none"; }
$close.onclick = closeModal;
window.addEventListener('click', e => { if (e.target === $modal) closeModal(); });

/* ===== íŒíŠ¸/ì •ë‹µ ë³´ê¸° ===== */
$hint1.onclick = () => {
  openModal("ë„ì„œê²€ìƒ‰ëŒ€ë¥¼ ì´ìš©í•´ ì±…ì¥ì—ì„œ ë„ì„œë¥¼ ì°¾ì•„!");
  if (hintLevel < 1) hintLevel = 1;
  $hint2.disabled = false;
};
$hint2.onclick = () => {
  openModal("ê³ ì–‘ì´ê°€ 2ë§ˆë¦¬ë¼ë©´ ìˆ«ìë¥¼ í•©ì³ì•¼ê² ì§€.");
  if (hintLevel < 2) hintLevel = 2;
  $ansBtn.disabled = false;
};
$ansBtn.onclick = () => {
  openModal("3258");
  if (hintLevel < 3) hintLevel = 3;
};
$totalBtn.onclick = () => {
  const t = Number(localStorage.getItem(CHURU_KEY)||"0");
  openModal(`í˜„ì¬ê¹Œì§€ íšë“í•œ ì¸„ë¥´: ${t}ê°œ`);
};

/* ===== ì •ë‹µ ì²˜ë¦¬ ===== */
function checkAnswer(){
  const v = ($answer.value || "").trim();
  if (v === correctAnswer){
    closeModal();
    handleCorrectOnce();
  }else{
    openModal("ë‹¤ì‹œ í•œë²ˆ ê²€ì€ê³ ì–‘ì´ë¥¼ ìì„¸íˆ ë´!");
  }
}
$submit.onclick = checkAnswer;
$answer.addEventListener('keydown', e => { if(e.key === 'Enter') checkAnswer(); });

/* ===== í•œ ë²ˆë§Œ ê°€ì‚° â†’ ë³´ìƒì˜ìƒ â†’ ë‹¤ìŒ í˜ì´ì§€ ===== */
function handleCorrectOnce(){
  // ì´ë¯¸ ì²˜ë¦¬ëœ í˜ì´ì§€ë©´ ê°€ì‚° ì—†ì´ ì˜ìƒë§Œ
  if (localStorage.getItem(PAGE_KEY) === "1"){
    playRewardAndGo();
    return;
  }
  const addMap = [3,2,1,0]; // íŒíŠ¸ ì‚¬ìš©ëŸ‰ì— ë”°ë¥¸ íšë“ëŸ‰
  const add = addMap[hintLevel] ?? 0;
  const cur = Number(localStorage.getItem(CHURU_KEY)||"0");
  localStorage.setItem(CHURU_KEY, String(cur + add));
  localStorage.setItem(PAGE_KEY, "1"); // âœ… ì¤‘ë³µê°€ì‚° ë°©ì§€

  playRewardAndGo();
}

function playRewardAndGo(){
  const src = ["curu1.mp4","curu2.mp4","curu3.mp4","curu4.mp4"][hintLevel] || "curu4.mp4";
  $video.src = src;

  // ğŸ”‡ ìŒì†Œê±° ë³´ì¥ (ëª¨ë°”ì¼ ìë™ì¬ìƒ Friendly)
  $video.muted = true;
  $video.defaultMuted = true;
  $video.volume = 0;

  $video.currentTime = 0;
  $overlay.style.display = "flex";
  $overlay.setAttribute("aria-hidden","false");

  // ì œì¶œ/íŒíŠ¸ ë²„íŠ¼ ì ê¸ˆ
  [$submit,$hint1,$hint2,$ansBtn,$totalBtn].forEach(b=>b.disabled = true);

  // ì˜ìƒ ì¢…ë£Œ â†’ ë‹¤ìŒ í˜ì´ì§€
  $video.onended = () => { location.href = nextUrl; };

  // ìë™ì¬ìƒ ì‹œë„, ì‹¤íŒ¨ ì‹œ controls ë…¸ì¶œ
  const p = $video.play();
  if (p && typeof p.catch === "function"){
    p.catch(()=>{ $video.setAttribute('controls','controls'); });
  }
}
/* === [ì¶”ê°€] í˜ì´ì§€ ë¡œë“œ í›„ 1ì´ˆ ë’¤, ë¯¸ì…˜ ì˜ìƒ í‘œì‹œ(ë°°ê²½ ì–´ë‘¡ì§€ ì•ŠìŒ) === */
/* í¬ì¸íŠ¸: 1ì´ˆê°€ ì§€ë‚˜ê¸° ì „ê¹Œì§€ëŠ” overlayë„, videoë„ display:none â†’ ê¹Œë§Œ ë°•ìŠ¤ ì—†ìŒ */
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    const $missionOverlay = document.getElementById('missionOverlay');
    const $missionVideo   = document.getElementById('missionVideo');

    // 1ì´ˆ í›„ì—ì•¼ src ì§€ì • â†’ video ê¸°ë³¸ ê²€ì • í™”ë©´ ë…¸ì¶œ ì°¨ë‹¨
    $missionVideo.src = "mission.mp4";

    // ëª¨ë°”ì¼ ìë™ì¬ìƒ ëŒ€ì‘
    $missionVideo.muted = true;
    $missionVideo.defaultMuted = true;
    $missionVideo.volume = 0;
    $missionVideo.currentTime = 0;

    // ì´ì œ í™”ë©´ì— í‘œì‹œ
    $missionOverlay.style.display = "flex";
    $missionVideo.style.display   = "block";

    // ì¢…ë£Œ ì‹œ ìë™ ìˆ¨ê¹€ + ì–¸ë¡œë“œ
    $missionVideo.onended = () => {
      $missionOverlay.style.display = "none";
      $missionVideo.style.display   = "none";
      $missionVideo.removeAttribute("src");
      $missionVideo.load();
    };

    // ìë™ì¬ìƒ ì‹œë„ (ì‹¤íŒ¨ ì‹œ controls ë…¸ì¶œ)
    const playPromise = $missionVideo.play();
    if (playPromise && typeof playPromise.catch === "function"){
      playPromise.catch(() => {
        $missionVideo.setAttribute("controls","controls");
      });
    }
  }, 1000); // 1ì´ˆ ëŒ€ê¸°
});
  
</script>
</body>
</html>



